{
  "permissions": {
    "allow": [
      "Bash(tree:*)",
      "Bash(npm run format:*)",
      "Bash(npm run build:*)",
      "Bash(npm run lint:*)",
      "Bash(mv:*)",
      "Bash(rm:*)",
      "Bash(find:*)",
      "Bash(npm run start:dev:*)",
      "Bash(cat:*)",
      "Bash(NODE_ENV=development npm run start:dev)",
      "Bash(echo $AGENT_API_BASE_URL)",
      "Bash(unset AGENT_API_BASE_URL)",
      "Bash(curl:*)",
      "Bash(python3:*)",
      "Bash(echo \"AGENT_API_KEY=$AGENT_API_KEY\")",
      "Bash(unset AGENT_API_KEY)",
      "Bash(pnpm --version)",
      "Bash(git init:*)",
      "Bash(git add:*)",
      "Bash(git remote add:*)",
      "Bash(git branch:*)",
      "Bash(git config:*)",
      "Bash(git remote remove:*)",
      "Bash(pnpm install:*)",
      "Bash(pnpm run build:*)",
      "Bash(pnpm run format:*)",
      "Bash(pnpm add:*)",
      "Bash(test:*)",
      "Bash(cloc:*)",
      "Bash(npx tsc:*)",
      "Bash(git checkout:*)",
      "Bash(node -e:*)",
      "Bash(mkdir:*)",
      "Bash(lsof:*)",
      "Bash(xargs kill -9)",
      "Bash(npm test:*)",
      "Bash(kill:*)",
      "Bash(awk:*)",
      "Bash(pkill:*)",
      "Bash(echo:*)",
      "Bash(printenv:*)",
      "Bash(unset:*)",
      "Bash(env)",
      "Bash(MAX_HISTORY_PER_CHAT=30 npm run start:dev:*)",
      "Read(//Users/jiezhu/workSpace/DuLiDay/**)",
      "Bash(chmod:*)",
      "Bash(./switch-agent-env.sh:*)",
      "Read(//private/tmp/**)",
      "Bash(npm install:*)",
      "Bash(git log:*)",
      "Bash(git mv:*)",
      "Bash(node scripts/update-changelog.js:*)",
      "Bash(node scripts/update-changelog.mjs:*)",
      "Bash(.git/hooks/post-merge)",
      "Bash(git ls-tree:*)",
      "Bash(git pull:*)",
      "Bash(git fsck:*)",
      "Bash(.claude/hooks/auto-stage-files.sh)",
      "Bash(.claude/hooks/check-modified-files.sh)",
      "Bash(.claude/hooks/session-start.sh)",
      "Bash(git rm:*)",
      "Bash(code --list-extensions:*)",
      "Bash(cursor --list-extensions)",
      "Bash(git fetch:*)",
      "Bash(%s)",
      "Bash(%b)",
      "Bash(%an)",
      "Bash(%ae)",
      "Bash(%ad --date=short)",
      "Bash(git show:*)",
      "Bash(npx prettier:*)",
      "Bash(pnpm run start:dev:*)",
      "Bash(API_KEY=\"c4de6f.7NkraOJra-X7fgVqdf7H3A.awFbsH2CdPt5vSsr\")",
      "Bash(gh auth:*)",
      "Bash(open http://localhost:8080/monitoring.html)",
      "Bash(gh run:*)",
      "Bash(pnpm exec tsc:*)",
      "Bash(pnpm run test:*)",
      "Bash(gh pr create:*)",
      "Bash(pnpm run lint:*)",
      "Bash(pnpm exec prettier:*)",
      "Bash(git rev-parse:*)",
      "Bash(xargs:*)",
      "Bash(/tmp/ai-code-review.yml.backup)",
      "Bash(/tmp/original-ai-review.yml)",
      "Bash(.github/workflows/version-changelog.yml)",
      "Bash(gh api:*)",
      "Bash(pnpm run lint:check:*)",
      "Bash(NODE_ENV=production node:*)",
      "Bash(pnpm run start:prod:*)",
      "Bash(timeout 30 pnpm run start:dev:*)",
      "Bash(tee:*)",
      "Bash(pnpm test:*)",
      "Bash(pnpm run test:cov:*)",
      "Bash(source:*)",
      "Bash(time curl -s http://localhost:8080/agent/tools)",
      "Bash(ipconfig getifaddr:*)",
      "Bash(timeout 10 pnpm run start:dev:*)",
      "Bash(NODE_ENV=development node -e \"\nconst { execSync } = require(''''child_process'''');\ntry {\n  const output = execSync(''''pnpm run start:dev'''', { \n    timeout: 8000,\n    encoding: ''''utf-8'''',\n    stdio: ''''pipe''''\n  });\n  console.log(output);\n} catch (error) {\n  console.log(error.stdout || '''''''');\n  console.log(''''启动测试完成（超时为正常现象）'''');\n}\n\")",
      "Bash(/dev/null)",
      "Bash(./scripts/test-alerts.sh:*)",
      "Bash(storage/monitoring-data.json)",
      "Bash(node test-api-key.js:*)",
      "Bash(__NEW_LINE__ echo \"=== 1. 测试业务指标告警（应该被静默，不发送到飞书）===\" curl -s -X POST http://localhost:8080/alert/test/metrics)",
      "Bash(node test-axios-headers.js:*)",
      "Bash(NODE_ENV=development pnpm run:*)",
      "Bash(timeout 15 pnpm run start:dev:*)",
      "Bash(pnpm run start:dev:all:*)",
      "Bash(open http://localhost:5173)",
      "Bash(killall node:*)",
      "Bash(TOKEN=\"t-g104bpbuLL6TTIMMULK3VH3OTSJE4QA2LRJ4WUD3\" curl -s \"https://open.feishu.cn/open-apis/bitable/v1/apps/RypLwXb1yiKdRpkFN4bcvWnmnsf/tables/tblKNwN8aquh2JAy/fields\" -H \"Authorization: Bearer $TOKEN\")",
      "Bash(claude mcp add context7 -- npx -y @upstash/context7-mcp)",
      "Bash(claude mcp add:*)",
      "Bash(claude mcp remove:*)",
      "Bash(claude mcp list:*)",
      "Bash(sed:*)",
      "Bash(NODE_ENV=development node -e \"\nconst { execSync } = require(''child_process'');\ntry {\n  const output = execSync(''pnpm run start:dev'', { \n    timeout: 12000,\n    encoding: ''utf-8'',\n    stdio: ''pipe''\n  });\n  console.log(output);\n} catch (error) {\n  console.log(error.stdout || '''');\n  console.log(error.stderr || '''');\n  if (error.killed) {\n    console.log(''✅ 服务启动成功（超时为正常现象）'');\n  }\n}\n\")",
      "Bash(pnpm remove:*)",
      "Bash(launchctl getenv:*)",
      "Bash(defaults read:*)",
      "Bash(node:*)",
      "Bash(./test-feishu.sh:*)",
      "Bash(jq:*)",
      "Bash(/usr/bin/curl -s 'https://uvmbxcilpteaiizplcyp.supabase.co/storage/v1/object/Bot/configData/AppConfig.json' -H 'Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InV2bWJ4Y2lscHRlYWlpenBsY3lwIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc0Njk5NjQ3MywiZXhwIjoyMDYyNTcyNDczfQ.mBNoWWJiNUh4dOMZQELCrOuxqaFNc_j1-pIiVZqOsQM')",
      "Bash(/usr/bin/head:*)",
      "Bash(time curl:*)",
      "Bash(timeout 8 pnpm run dev:*)",
      "Bash(/usr/bin/curl -s https://uvmbxcilpteaiizplcyp.supabase.co/storage/v1/object/brand-configs/config/brand-data.json -H 'Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InV2bWJ4Y2lscHRlYWlpenBsY3lwIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc0Njk5NjQ3MywiZXhwIjoyMDYyNTcyNDczfQ.mBNoWWJiNUh4dOMZQELCrOuxqaFNc_j1-pIiVZqOsQM')",
      "Bash(/usr/bin/curl -s https://uvmbxcilpteaiizplcyp.supabase.co/storage/v1/object/Bot/configData/AppConfig.json -H 'Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InV2bWJ4Y2lscHRlYWlpenBsY3lwIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc0Njk5NjQ3MywiZXhwIjoyMDYyNTcyNDczfQ.mBNoWWJiNUh4dOMZQELCrOuxqaFNc_j1-pIiVZqOsQM')",
      "Bash(/usr/bin/curl -s 'https://uvmbxcilpteaiizplcyp.supabase.co/storage/v1/bucket' -H 'Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InV2bWJ4Y2lscHRlYWlpenBsY3lwIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc0Njk5NjQ3MywiZXhwIjoyMDYyNTcyNDczfQ.mBNoWWJiNUh4dOMZQELCrOuxqaFNc_j1-pIiVZqOsQM')",
      "Bash(/usr/bin/curl -s https://uvmbxcilpteaiizplcyp.supabase.co/storage/v1/object/Bot/configData/AppConfig.json -H 'Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InV2bWJ4Y2lscHRlYWlpenBsY3lwIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2MjkwODI2MiwiZXhwIjoyMDc4NDg0MjYyfQ.IU2po4_YttuvOyHwJSR8yU9739tjV5T6zmMyjPcGaTc')",
      "Bash(/usr/bin/curl -s 'https://uvmbxcilpteaiizplcyp.supabase.co/storage/v1/bucket' )",
      "Bash(TOKEN=\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InV2bWJ4Y2lscHRlYWlpenBsY3lwIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2MjkwODI2MiwiZXhwIjoyMDc4NDg0MjYyfQ.IU2po4_YttuvOyHwJSR8yU9739tjV5T6zmMyjPcGaTc\")",
      "Bash(timeout 20 pnpm run start:dev:*)",
      "Bash(timeout 15 pnpm run dev:*)",
      "Bash(ls:*)",
      "Bash(/Users/jiezhu/workSpace/DuLiDay/duliday-wecom-service/dashboard2/src/view/dashboard/list/components/HealthGrid/index.module.scss )",
      "Bash(/Users/jiezhu/workSpace/DuLiDay/duliday-wecom-service/dashboard2/src/view/dashboard/list/components/MetricCard/index.module.scss )",
      "Bash(/Users/jiezhu/workSpace/DuLiDay/duliday-wecom-service/dashboard2/src/view/dashboard/list/components/ChartCard/index.module.scss )",
      "Bash(/Users/jiezhu/workSpace/DuLiDay/duliday-wecom-service/dashboard2/src/view/dashboard/list/styles/index.module.scss )",
      "Bash(/Users/jiezhu/workSpace/DuLiDay/duliday-wecom-service/dashboard2/src/view/chat-records/list/components/HeaderBar/index.module.scss )",
      "Bash(/Users/jiezhu/workSpace/DuLiDay/duliday-wecom-service/dashboard2/src/view/chat-records/list/components/AnalyticsPanel/index.module.scss )",
      "Bash(/Users/jiezhu/workSpace/DuLiDay/duliday-wecom-service/dashboard2/src/view/chat-records/list/components/SessionList/index.module.scss )",
      "Bash(/Users/jiezhu/workSpace/DuLiDay/duliday-wecom-service/dashboard2/src/view/chat-records/list/components/MessageDetail/index.module.scss )",
      "Bash(/Users/jiezhu/workSpace/DuLiDay/duliday-wecom-service/dashboard2/src/view/chat-records/list/styles/index.module.scss )",
      "Bash(/Users/jiezhu/workSpace/DuLiDay/duliday-wecom-service/dashboard2/src/view/system/list/components/KpiCard/index.module.scss )",
      "Bash(/Users/jiezhu/workSpace/DuLiDay/duliday-wecom-service/dashboard2/src/view/system/list/components/ConsolePanel/index.module.scss )",
      "Bash(/Users/jiezhu/workSpace/DuLiDay/duliday-wecom-service/dashboard2/src/view/system/list/styles/index.module.scss )",
      "Bash(/Users/jiezhu/workSpace/DuLiDay/duliday-wecom-service/dashboard2/src/view/consoleLogs/list/components/ToolBar/index.module.scss )",
      "Bash(/Users/jiezhu/workSpace/DuLiDay/duliday-wecom-service/dashboard2/src/view/consoleLogs/list/components/LogList/index.module.scss )",
      "Bash(/Users/jiezhu/workSpace/DuLiDay/duliday-wecom-service/dashboard2/src/view/consoleLogs/list/styles/index.module.scss )",
      "Bash(/Users/jiezhu/workSpace/DuLiDay/duliday-wecom-service/dashboard2/src/view/hosting/list/components/GlobalSwitch/index.module.scss )",
      "Bash(/Users/jiezhu/workSpace/DuLiDay/duliday-wecom-service/dashboard2/src/view/hosting/list/components/GroupTable/index.module.scss )",
      "Bash(/Users/jiezhu/workSpace/DuLiDay/duliday-wecom-service/dashboard2/src/view/hosting/list/components/InfoCard/index.module.scss )",
      "Bash(/Users/jiezhu/workSpace/DuLiDay/duliday-wecom-service/dashboard2/src/view/hosting/list/styles/index.module.scss )",
      "Bash(/Users/jiezhu/workSpace/DuLiDay/duliday-wecom-service/dashboard2/src/view/users/list/components/UserTable/index.module.scss )",
      "Bash(/Users/jiezhu/workSpace/DuLiDay/duliday-wecom-service/dashboard2/src/view/users/list/styles/index.module.scss)",
      "Bash(timeout 5 curl:*)",
      "Bash(timeout 10 curl:*)",
      "Bash(timeout 60 pnpm run start:dev:*)",
      "Bash(nc:*)",
      "Bash(pnpm exec node:*)",
      "Bash(grep:*)",
      "Bash(mcp__upstash__redis_database_list_databases)",
      "Bash(ENABLE_BULL_QUEUE=false timeout 15 pnpm run start:dev:*)",
      "Bash(ENABLE_BULL_QUEUE=false node -e \"\nconst { execSync } = require(''child_process'');\ntry {\n  const output = execSync(''pnpm run start:dev'', { \n    timeout: 15000,\n    encoding: ''utf-8'',\n    stdio: ''pipe'',\n    env: { ...process.env, ENABLE_BULL_QUEUE: ''false'' }\n  });\n  console.log(output);\n} catch (error) {\n  console.log(error.stdout || '''');\n  console.log(error.stderr || '''');\n  if (error.killed) {\n    console.log(''✅ 服务启动成功（超时为正常现象）'');\n  }\n}\n\")",
      "Bash(for:*)",
      "Bash(do echo \"=== 尝试 $i ===\")",
      "Bash(break)",
      "Bash(done)",
      "Bash(ENABLE_BULL_QUEUE=false node:*)",
      "Bash(\"$AGENT_API_BASE_URL/tools\")",
      "Bash(\"$AGENT_API_BASE_URL/models\")",
      "Bash(__NEW_LINE__ echo -e \"\\n=== 测试 /chat 接口 ===\")",
      "Bash(\"$AGENT_API_BASE_URL/chat\")",
      "Bash(open http://localhost:8080/test-ws.html)",
      "Bash(/tmp/test-bot-stability.sh)",
      "Bash(TOKEN=\"$SUPABASE_SERVICE_ROLE_KEY\" curl:*)",
      "Bash(API_KEY='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InV2bWJ4Y2lscHRlYWlpenBsY3lwIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2MjkwODI2MiwiZXhwIjoyMDc4NDg0MjYyfQ.IU2po4_YttuvOyHwJSR8yU9739tjV5T6zmMyjPcGaTc')",
      "Bash(API_KEY='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InV2bWJ4Y2lscHRlYWlpenBsY3lwIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2MjkwODI2MiwiZXhwIjoyMDc4NDg0MjYyfQ.IU2po4_YttuvOyHwJSR8yU9739tjV5T6zmMyjPcGaTc' echo \"=== 今天的消息统计 ===\" curl -s \"https://uvmbxcilpteaiizplcyp.supabase.co/rest/v1/chat_messages?select=*&timestamp=gte.2025-12-09T00:00:00Z\" -H \"apikey: $API_KEY\" -H \"Authorization: Bearer $API_KEY\" -H \"Prefer: count=exact\" -I)",
      "Bash(API_KEY='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InV2bWJ4Y2lscHRlYWlpenBsY3lwIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2MjkwODI2MiwiZXhwIjoyMDc4NDg0MjYyfQ.IU2po4_YttuvOyHwJSR8yU9739tjV5T6zmMyjPcGaTc' curl -s \"https://uvmbxcilpteaiizplcyp.supabase.co/rest/v1/message_processing_records?select=*&limit=1\" -H \"apikey: $API_KEY\" -H \"Authorization: Bearer $API_KEY\")",
      "Bash(API_KEY='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InV2bWJ4Y2lscHRlYWlpenBsY3lwIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2MjkwODI2MiwiZXhwIjoyMDc4NDg0MjYyfQ.IU2po4_YttuvOyHwJSR8yU9739tjV5T6zmMyjPcGaTc' curl -s \"https://uvmbxcilpteaiizplcyp.supabase.co/rest/v1/message_processing_records?select=*&order=created_at.desc&limit=5\" -H \"apikey: $API_KEY\" -H \"Authorization: Bearer $API_KEY\")",
      "Bash(API_KEY='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InV2bWJ4Y2lscHRlYWlpenBsY3lwIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2MjkwODI2MiwiZXhwIjoyMDc4NDg0MjYyfQ.IU2po4_YttuvOyHwJSR8yU9739tjV5T6zmMyjPcGaTc' curl -s \"https://uvmbxcilpteaiizplcyp.supabase.co/rest/v1/message_processing_records?select=*&order=received_at.desc&limit=5\" -H \"apikey: $API_KEY\" -H \"Authorization: Bearer $API_KEY\")",
      "Bash(sudo /usr/libexec/ApplicationFirewall/socketfilterfw:*)",
      "Bash(route -n:*)",
      "Bash(/Users/jiezhu/workSpace/DuLiDay/duliday-wecom-service/network-test.sh)",
      "Bash(scutil:*)",
      "Bash(API_KEY=\"$SUPABASE_SERVICE_ROLE_KEY\")",
      "Bash(ENABLE_BULL_QUEUE=false timeout 20 pnpm run start:dev:*)",
      "Bash(__NEW_LINE__ echo \"=== 查看 message_processing_records 表数据（最新 5 条）===\")",
      "Bash(__NEW_LINE__ echo \"=== 检查 monitoring_hourly_stats 表 ===\")",
      "Bash(__NEW_LINE__ echo -e \"\\n\\n=== 检查 monitoring_error_logs 表 ===\")",
      "Bash(__NEW_LINE__ echo -e \"\\n\\n=== 检查 monitoring_daily_stats 表 ===\")",
      "Bash(export STRIDE_API_BASE_URL=https://stride-bg.dpclouds.com)",
      "Bash(API_KEY=\"$SUPABASE_SERVICE_ROLE_KEY\" curl -s \"https://uvmbxcilpteaiizplcyp.supabase.co/rest/v1/message_processing_records?select=message_id,received_at,status&order=received_at.desc&limit=5\" )",
      "Bash(API_KEY=\"$SUPABASE_SERVICE_ROLE_KEY\" curl:*)",
      "Bash(sort:*)",
      "Bash(wc:*)",
      "Bash(/tmp/test-processing-status.sh)",
      "Bash(API_KEY=\"$SUPABASE_SERVICE_ROLE_KEY\" curl -s \"https://uvmbxcilpteaiizplcyp.supabase.co/rest/v1/message_processing_records?select=message_id,status,received_at,user_name&order=received_at.desc&limit=10\" -H \"apikey: $API_KEY\" -H \"Authorization: Bearer $API_KEY\")",
      "Bash(API_KEY=\"$SUPABASE_SERVICE_ROLE_KEY\" echo \"=== 检查 message_processing_records 表基本信息 ===\" echo \"\" echo \"1. 总记录数（全部）：\" curl -s \"https://uvmbxcilpteaiizplcyp.supabase.co/rest/v1/message_processing_records?select=count\" -H \"apikey: $API_KEY\" -H \"Authorization: Bearer $API_KEY\" -H \"Prefer: count=exact\" -I)",
      "Bash(BASE_URL=\"https://uvmbxcilpteaiizplcyp.supabase.co/rest/v1\")",
      "Bash(__NEW_LINE__ echo \"=== 测试不同的查询参数格式 ===\")",
      "Bash(__NEW_LINE__ echo \"1. 使用 and 参数（当前方式）：\")",
      "Bash(__NEW_LINE__ echo \"\")",
      "Bash(API_KEY=\"$SUPABASE_SERVICE_ROLE_KEY\" BASE_URL=\"https://uvmbxcilpteaiizplcyp.supabase.co/rest/v1\")",
      "Bash(API_KEY=\"$SUPABASE_SERVICE_ROLE_KEY\" echo \"=== 测试其他表的查询速度 ===\" echo \"\" echo \"1. chat_messages 表：\" time curl -m 5 -s \"https://uvmbxcilpteaiizplcyp.supabase.co/rest/v1/chat_messages?limit=5\" -H \"apikey: $API_KEY\" -H \"Authorization: Bearer $API_KEY\")",
      "Bash(__NEW_LINE__ curl -m 5 -s \"https://uvmbxcilpteaiizplcyp.supabase.co/rest/v1/chat_messages?limit=3\" )",
      "Bash(/usr/bin/curl -s -X POST \"https://open.feishu.cn/open-apis/auth/v3/tenant_access_token/internal\" -H \"Content-Type: application/json\" -d '{\"\"app_id\"\": \"\"cli_a9ae9bcd92f99cc0\"\", \"\"app_secret\"\": \"\"SCcwMAhNyB014U3sBG5BuhhOmfgaDQJg\"\"}')",
      "Bash(/usr/bin/curl -s -X POST \"https://open.feishu.cn/open-apis/contact/v3/users/batch_get_id?user_id_type=open_id\" )",
      "Bash(/usr/bin/curl -s -X POST \"https://open.feishu.cn/open-apis/contact/v3/users/batch_get_id?user_id_type=open_id\" -H \"Authorization: Bearer t-g104cff7OR35Q5RKHE4JMOKGER6VIFFTJ7YZ73EE\" -H \"Content-Type: application/json\" -d '{\"\"\"\"mobiles\"\"\"\": [\"\"\"\"15114818773\"\"\"\", \"\"\"\"13683856674\"\"\"\"]}')",
      "Bash(TOKEN=\"t-g104cff7OR35Q5RKHE4JMOKGER6VIFFTJ7YZ73EE\" /usr/bin/curl -s -X POST \"https://open.feishu.cn/open-apis/contact/v3/users/batch_get_id?user_id_type=open_id\" -H \"Authorization: Bearer $TOKEN\" -H \"Content-Type: application/json\" -d '{\"\"\"\"mobiles\"\"\"\": [\"\"\"\"15114818773\"\"\"\", \"\"\"\"13683856674\"\"\"\"]}')",
      "Bash(TOKEN=\"t-g104cff7OR35Q5RKHE4JMOKGER6VIFFTJ7YZ73EE\")",
      "Bash(API_KEY=\"$SUPABASE_SERVICE_ROLE_KEY\" curl -s -w \"\\nHTTP Status: %{http_code}\\nTime: %{time_total}s\\n\" \"https://uvmbxcilpteaiizplcyp.supabase.co/rest/v1/user_activity?limit=1\" -H \"apikey: $API_KEY\" -H \"Authorization: Bearer $API_KEY\")",
      "Bash([ -n \"$SUPABASE_SERVICE_ROLE_KEY\" ])",
      "Bash(\"https://uvmbxcilpteaiizplcyp.supabase.co/rest/v1/user_activity?limit=1\" )",
      "Bash(\"https://uvmbxcilpteaiizplcyp.supabase.co/rest/v1/chat_messages?limit=1&select=id,chat_id\" )",
      "Bash(do)",
      "Bash(\"https://uvmbxcilpteaiizplcyp.supabase.co/rest/v1/chat_messages?limit=1&select=id\" )",
      "Bash(\"https://uvmbxcilpteaiizplcyp.supabase.co/rest/v1/chat_messages?select=id&limit=5\" )",
      "Bash(\"https://uvmbxcilpteaiizplcyp.supabase.co/rest/v1/user_activity?select=id,date&limit=5\" )",
      "Bash(\"https://uvmbxcilpteaiizplcyp.supabase.co/rest/v1/user_activity?select=id,activity_date&limit=5\" )",
      "Bash(\"https://uvmbxcilpteaiizplcyp.supabase.co/rest/v1/user_activity?select=*&limit=3\" )",
      "Bash(\"https://uvmbxcilpteaiizplcyp.supabase.co/rest/v1/user_activity?select=*&limit=5\" )",
      "Bash(API_KEY=\"$SUPABASE_SERVICE_ROLE_KEY\" time curl:*)",
      "Bash(API_KEY=\"$SUPABASE_SERVICE_ROLE_KEY\" curl -s \"https://uvmbxcilpteaiizplcyp.supabase.co/rest/v1/monitoring_hourly_stats?select=hour,p95_duration&order=hour.desc&limit=5\" -H \"apikey: $API_KEY\" -H \"Authorization: Bearer $API_KEY\")",
      "Bash(__NEW_LINE__ cat /tmp/response.txt)",
      "Bash(/tmp/test_rpc.sh)",
      "Bash(__NEW_LINE__ node -e \"\nconst data = require(''/tmp/api_response.json'');\nconsole.log(''API 响应:'');\nif (data.success !== undefined) {\n  if (data.success && Array.isArray(data.data)) {\n    console.log(''✅ 成功！返回'', data.data.length, ''天的数据'');\n    console.log(''前 5 天:'');\n    data.data.slice(0, 5).forEach(item => {\n      console.log(''  '', item.date, ''- 消息:'', item.messageCount, ''会话:'', item.sessionCount);\n    });\n  } else {\n    console.log(''❌ 错误:'', data.error || data);\n  }\n} else {\n  console.log(''原始响应:'', JSON.stringify(data).substring(0, 200));\n}\n\")",
      "Bash(API_KEY=\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InV2bWJ4Y2lscHRlYWlpenBsY3lwIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2MjkwODI2MiwiZXhwIjoyMDc4NDg0MjYyfQ.IU2po4_YttuvOyHwJSR8yU9739tjV5T6zmMyjPcGaTc\")",
      "Bash(__NEW_LINE__ echo \"=== 测试 get_chat_summary_stats RPC 函数（近 3 天） ===\")",
      "Bash(/tmp/test-summary-optimization.sh)",
      "Bash(API_KEY=\"$SUPABASE_SERVICE_ROLE_KEY\" curl -s \"https://uvmbxcilpteaiizplcyp.supabase.co/rest/v1/message_processing_records?status=eq.processing&order=received_at.desc&limit=5&select=message_id,user_name,message_preview,received_at,status\" -H \"apikey: $API_KEY\" -H \"Authorization: Bearer $API_KEY\")",
      "Bash(/tmp/test-message-aggregation.sh)",
      "Bash(/tmp/test-message-aggregation-v2.sh)",
      "Bash(__NEW_LINE__ curl -s \"https://uvmbxcilpteaiizplcyp.supabase.co/rest/v1/message_processing_records?message_id=in.(test_msg_1765878274992,test_msg_1765878277822,test_msg_1765878279067)&select=message_id,status,message_preview,reply_preview,token_usage,total_duration&order=received_at.asc\" )",
      "Bash(/tmp/quick-test.sh)",
      "Bash(__NEW_LINE__ echo \"查询最近 20 条记录的状态分布...\")",
      "Bash(__NEW_LINE__ echo \"查询最近 15 条记录...\")",
      "Bash(__NEW_LINE__ curl -s \"https://uvmbxcilpteaiizplcyp.supabase.co/rest/v1/message_processing_records?message_preview=like.%E6%B6%88%E6%81%AF*&select=message_id,chat_id,status,message_preview,reply_preview,token_usage&order=received_at.desc&limit=10\" -H \"apikey: $API_KEY\" -H \"Authorization: Bearer $API_KEY\")",
      "Bash(/tmp/query-recent.sh)",
      "Bash(/tmp/query-simple.sh:*)",
      "Bash(/tmp/test-batch-aggregation.sh:*)",
      "Bash(__NEW_LINE__ echo \"==========================================\")",
      "Bash(__NEW_LINE__ curl -s \"https://uvmbxcilpteaiizplcyp.supabase.co/rest/v1/message_processing_records?message_id=in.(test_msg_1765880190511,test_msg_1765880193200,test_msg_1765880194539)&select=message_id,status,batch_id,is_primary,reply_preview,token_usage,total_duration&order=received_at.asc\" )",
      "Bash(__NEW_LINE__ curl -s \"https://uvmbxcilpteaiizplcyp.supabase.co/rest/v1/message_processing_records?message_id=in.(test_msg_1765880190511,test_msg_1765880193200,test_msg_1765880194539)&select=message_id,status,batch_id,is_primary,token_usage,total_duration&order=received_at.asc\" )",
      "Bash(__NEW_LINE__ if [ -z \"$SUPABASE_SERVICE_ROLE_KEY\" ])",
      "Bash(then)",
      "Bash(exit 1)",
      "Bash(fi)",
      "Bash(__NEW_LINE__ API_KEY=\"$SUPABASE_SERVICE_ROLE_KEY\")",
      "Bash(__NEW_LINE__ tail -50 /tmp/server-restart.log)",
      "Bash(__NEW_LINE__ for i in 1 2 3)",
      "Bash(MSG_ID=\"msg_$CHAT_ID_$i\")",
      "Bash(__NEW_LINE__ curl -s -X POST \"http://localhost:8080/message\" )",
      "Bash(CHAT_ID=\"test_batch_1765880700\":*)",
      "Bash(__NEW_LINE__ MSG_ID1=\"msg_$CHAT_ID_1\")",
      "Bash(MSG_ID2=\"msg_$CHAT_ID_2\")",
      "Bash(MSG_ID3=\"msg_$CHAT_ID_3\")",
      "Bash(__NEW_LINE__ echo \"发送消息 1: $MSG_ID1\")",
      "Bash(__NEW_LINE__ echo \"发送消息 2: $MSG_ID2\")",
      "Bash(__NEW_LINE__ echo \"发送消息 3: $MSG_ID3\")",
      "Bash(__NEW_LINE__ echo \"等待 25 秒让消息处理完成...\")",
      "Bash(__NEW_LINE__ echo \"发送消息 1...\")",
      "Bash(__NEW_LINE__ echo \"发送消息 2...\")",
      "Bash(__NEW_LINE__ echo \"发送消息 3...\")",
      "Bash(__NEW_LINE__ echo \"查询测试结果...\")",
      "Bash(__NEW_LINE__ curl -s \"https://uvmbxcilpteaiizplcyp.supabase.co/rest/v1/message_processing_records?chat_id=eq.test_batch_1765880626&select=message_id,status,batch_id,is_primary,token_usage,total_duration&order=received_at.asc\" )",
      "Bash(__NEW_LINE__ echo \"查询测试结果 (chat_id=batch_test_1765880791)...\")",
      "Bash(__NEW_LINE__ curl -s \"https://uvmbxcilpteaiizplcyp.supabase.co/rest/v1/message_processing_records?chat_id=eq.batch_test_1765880791&select=message_id,status,batch_id,is_primary,token_usage,total_duration&order=received_at.asc\" )",
      "Bash(__NEW_LINE__ curl -s -X POST \"http://localhost:8080/message/test\" -H \"Content-Type: application/json\" -d \"{\"\"text\"\": \"\"最终测试消息1\"\", \"\"chatId\"\": \"\"$CHAT_ID\"\"}\")",
      "Bash(__NEW_LINE__ echo \"等待 30 秒...\")",
      "Bash(__NEW_LINE__ curl -s \"https://uvmbxcilpteaiizplcyp.supabase.co/rest/v1/message_processing_records?chat_id=eq.final_test_1765880984&select=message_id,status,batch_id,is_primary,token_usage,total_duration&order=received_at.asc\" )",
      "Bash(true echo \"统计 processing 状态的记录总数...\" curl -s -I \"https://uvmbxcilpteaiizplcyp.supabase.co/rest/v1/message_processing_records?status=eq.processing&select=message_id\"  -H \"apikey: $SUPABASE_SERVICE_ROLE_KEY\"  -H \"Authorization: Bearer $SUPABASE_SERVICE_ROLE_KEY\"  -H \"Prefer: count=exact\")",
      "Bash(__NEW_LINE__ echo \"统计 processing 状态的记录...\")",
      "Bash(__NEW_LINE__ echo \"将 24 条 processing 状态更新为 success...\")",
      "Bash(__NEW_LINE__ curl -s -X PATCH \"https://uvmbxcilpteaiizplcyp.supabase.co/rest/v1/message_processing_records?status=eq.processing\" )",
      "Bash(__NEW_LINE__ echo \"完成\")",
      "Bash(__NEW_LINE__ echo \"验证：剩余 processing 状态记录数...\")",
      "Bash(/usr/bin/curl -s \"https://uvmbxcilpteaiizplcyp.supabase.co/rest/v1/message_processing_records?select=message_id&limit=1\" -H \"apikey: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InV2bWJ4Y2lscHRlYWlpenBsY3lwIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2MjkwODI2MiwiZXhwIjoyMDc4NDg0MjYyfQ.IU2po4_YttuvOyHwJSR8yU9739tjV5T6zmMyjPcGaTc\" -H \"Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InV2bWJ4Y2lscHRlYWlpenBsY3lwIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2MjkwODI2MiwiZXhwIjoyMDc4NDg0MjYyfQ.IU2po4_YttuvOyHwJSR8yU9739tjV5T6zmMyjPcGaTc\")",
      "Bash(/usr/bin/curl -s \"http://localhost:8080/monitoring/dashboard/overview?range=today\")",
      "Bash(API_KEY=\"$SUPABASE_SERVICE_ROLE_KEY\" curl -s \"https://uvmbxcilpteaiizplcyp.supabase.co/rest/v1/message_processing_records?select=user_id,chat_id,user_name&received_at=gte.2025-12-17T00:00:00Z&order=received_at.desc&limit=50\" -H \"apikey: $API_KEY\" -H \"Authorization: Bearer $API_KEY\")",
      "Bash(__NEW_LINE__ echo \"=== 今日数据库中的 userId 去重数 ===\")",
      "Bash(__NEW_LINE__ echo \"=== user_activity 表今日数据 ===\")",
      "Bash(__NEW_LINE__ echo \"=== user_activity 表结构 ===\")",
      "Bash(__NEW_LINE__ echo \"=== 检查缺失的 4 个 chatId 在 message_processing_records 中的状态 ===\")",
      "Bash(__NEW_LINE__ echo \"=== 检查今日所有 processing 状态的消息 ===\")",
      "Bash(API_KEY=\"$SUPABASE_SERVICE_ROLE_KEY\" curl -s \"https://uvmbxcilpteaiizplcyp.supabase.co/rest/v1/message_processing_records?status=eq.processing&select=message_id,user_name,received_at,batch_id,is_primary&order=received_at.desc&limit=10\" -H \"apikey: $API_KEY\" -H \"Authorization: Bearer $API_KEY\")",
      "Bash(/usr/bin/curl:*)",
      "Bash(# 深入分析 agent_invocation 的 response echo \"\"=== 分析 agent response 结构 ===\"\" jq ''[.[] | select(.agent_invocation)] | .[0].agent_invocation.response | keys'' /tmp/recent_records.json echo \"\"\"\" echo \"\"=== 查看 agent response 中的 tool_calls ===\"\" jq ''[.[] | select(.agent_invocation.response.tool_calls)] | .[0].agent_invocation.response.tool_calls'' /tmp/recent_records.json)",
      "Bash(head -100 echo \"\" echo \"=== 查看一个完整的 agent response ===\" jq '[.[] | select(.agent_invocation)] | .[0].agent_invocation.response | {id, model, content: (.content | length), tool_calls: (.tool_calls | if . then length else 0 end)}' /tmp/recent_records.json)",
      "Bash(# 查看更详细的 messages 内容 echo \"\"=== 查看完整 messages 内容 ===\"\" jq ''[.[] | select(.agent_invocation.response.messages)] | .[0].agent_invocation.response.messages'' /tmp/recent_records.json)",
      "Bash(head -20 echo \"\" echo \"=== Agent Response Messages 完整链 ===\" jq '.agent_invocation.response.messages[] | { role, parts: [.parts[] | { type, toolName: .toolName, input: .input, output_preview: (if .output.text then .output.text[0:300] else .text[0:200] end) }] }' /tmp/xin_record.json)",
      "Bash(# 查看 messages (对话历史) echo \"\"=== Agent Request Messages (对话历史) ===\"\" jq ''[.[] | select(.agent_invocation.request.messages)] | .[0].agent_invocation.request.messages | length'' /tmp/success_records.json echo \"\"\"\" echo \"\"=== 对话历史示例 ===\"\" jq ''[.[] | select(.agent_invocation.request.messages)] | .[0].agent_invocation.request.messages | .[] | {role, content: (.content[0:100] // .content)}'' /tmp/success_records.json)",
      "Bash(API_KEY=\"$SUPABASE_SERVICE_ROLE_KEY\" curl -s \"https://uvmbxcilpteaiizplcyp.supabase.co/rest/v1/message_processing_records?status=eq.success&select=user_name,message_preview,reply_preview,token_usage,ai_duration,agent_invocation&order=received_at.desc&limit=10\" -H \"apikey: $API_KEY\" -H \"Authorization: Bearer $API_KEY\")",
      "Bash(# 提取具体的 agent 调用链示例 cat /tmp/detailed_records.json | jq ''[.[] | { user: .user_name, message: .message_preview, reply: .reply_preview, tokens: .token_usage, duration: .ai_duration, tool_calls: [.agent_invocation.response.messages[]? | select(.parts) | .parts[] | select(.toolName) | { tool: .toolName, input: .input, output_preview: (.output | tostring | .[0:200]) }] }]'')",
      "Bash(# 提取所有工具调用并分析错误 cat /tmp/stats_records.json | jq -r ''[.[] | .agent_invocation.response.messages[]? | select(.parts) | .parts[] | select(.toolName) | (.output | tostring)] | .[]'')",
      "Bash(# 提取所有工具调用的输出，分析错误类型 cat /tmp/all_records.json | jq -r ''[.[] | select(.agent_invocation.response.messages) | .agent_invocation.response.messages[] | select(.parts) | .parts[] | select(.toolName == \"\"duliday_job_list\"\") | .output.text // (.output | tostring)] | .[]'')",
      "Bash(if [ -z \"$SUPABASE_SERVICE_ROLE_KEY\" ])",
      "Bash(else)",
      "Bash(__NEW_LINE__ echo \"1. 状态分布统计\")",
      "Bash(__NEW_LINE__ jq -r '[.[] | select(.token_usage) | .token_usage] | {\n  count: length,\n  total: add,\n  min: min,\n  max: max,\n  avg: (add / length | floor),\n  p50: (sort | .[length/2 | floor]),\n  p90: (sort | .[length*0.9 | floor]),\n  p95: (sort | .[length*0.95 | floor])\n}' /tmp/basic_1000.json)",
      "Bash(__NEW_LINE__ echo \"10.1 消息长度分布 (message_preview):\")",
      "Bash(__NEW_LINE__ echo \"=== 查询醉离殇用户的聊天记录 (48条) ===\")",
      "Bash(__NEW_LINE__ /usr/bin/curl -s \"https://uvmbxcilpteaiizplcyp.supabase.co/rest/v1/message_processing_records?select=message_preview,reply_preview,status,token_usage,ai_duration,error,received_at&user_name=eq.醉离殇&order=received_at.asc\" )",
      "Bash(__NEW_LINE__ echo \"1. 醉离殇 (48条消息)\")",
      "Bash(API_KEY=\"$SUPABASE_SERVICE_ROLE_KEY\" curl -s \"https://uvmbxcilpteaiizplcyp.supabase.co/rest/v1/message_processing_records?status=eq.success&select=user_name,message_preview,reply_preview,token_usage,ai_duration,agent_invocation&order=received_at.desc&limit=50\" -H \"apikey: $API_KEY\" -H \"Authorization: Bearer $API_KEY\")",
      "Bash(__NEW_LINE__ echo \"=== 检查数据库总记录数和状态分布 ===\")",
      "Bash(# 检查之前保存的数据文件 echo \"\"=== 检查本地已保存的数据文件 ===\"\" ls -la /tmp/*.json)",
      "Bash(if [ -f /tmp/basic_1000.json ])",
      "Bash(if [ -f /tmp/success_sample.json ])",
      "Bash(__NEW_LINE__ echo \"=== 查询有 agent_invocation 的记录总数 ===\")",
      "Bash(# 分析品牌映射失败的情况 echo \"\"=== 品牌映射失败的输出分析 ===\"\" jq -r ''[.[] | select(.output | test(\"\"未找到品牌\"\")) | .output] | .[0:30] | .[]'' /tmp/job_list_calls.json echo \"\"\"\" echo \"\"=== 提取失败的品牌名称 ===\"\" jq -r ''[.[] | select(.output | test(\"\"未找到品牌\"\")) | .output] | .[] | split(\"\"品牌\"\") | .[1] | split(\"\"的组织\"\") | .[0] | gsub(\"\"''\"\"''\"\"''\"\"; \"\"\"\")'' /tmp/job_list_calls.json)",
      "Bash(API_KEY=\"$SUPABASE_SERVICE_ROLE_KEY\" curl -s \"https://uvmbxcilpteaiizplcyp.supabase.co/rest/v1/message_processing_records?status=eq.processing&select=message_id,user_name,received_at&order=received_at.desc&limit=10\" -H \"apikey: $API_KEY\" -H \"Authorization: Bearer $API_KEY\")",
      "Bash(API_KEY=\"$SUPABASE_SERVICE_ROLE_KEY\" curl -s \"https://uvmbxcilpteaiizplcyp.supabase.co/rest/v1/message_processing_records?status=eq.failure&select=message_id,status,is_primary&limit=10\" -H \"apikey: $API_KEY\" -H \"Authorization: Bearer $API_KEY\")",
      "Bash(API_KEY=\"$SUPABASE_SERVICE_ROLE_KEY\" curl -s -I \"https://uvmbxcilpteaiizplcyp.supabase.co/rest/v1/message_processing_records?status=eq.failure&select=message_id\" -H \"apikey: $API_KEY\" -H \"Authorization: Bearer $API_KEY\" -H \"Prefer: count=exact\")",
      "Bash(API_KEY=\"$SUPABASE_SERVICE_ROLE_KEY\" curl -s \"https://uvmbxcilpteaiizplcyp.supabase.co/rest/v1/?apikey=$API_KEY\" -H \"Authorization: Bearer $API_KEY\")",
      "Bash(/tmp/test-stream.sh:*)",
      "Bash(timeout 30 curl:*)",
      "Bash(ENABLE_BULL_QUEUE=false timeout 30 pnpm run start:dev:*)",
      "Bash(API_KEY=\"f4174f.nEA0MYE3Vz-U0O2w4HawdA.QH1lUahJwLpKnvm6\")",
      "Bash(pnpm exec eslint:*)",
      "Bash(timeout 10 pnpm run dev:*)",
      "Bash(TOKEN=\"t-g10415c4PQCSEFCBSLPOYKAZMJNB4QDTX3TUMEYY\")",
      "Bash(APP_TOKEN=\"WXQgb98iPauYsHsSYzMckqHcnbb\":*)",
      "Bash(__NEW_LINE__ echo \"=== 1. 每日消息 表格字段 ===\")",
      "Bash(__NEW_LINE__ echo \"=== 测试集 表格数据 ===\")",
      "Bash(TOKEN=\"t-g10415dK2Q4LIZJQQOZ64V66G7OG5GD2FDYOH3BB\")",
      "Bash(TABLE_ID=\"tblCRHFQqqJDJeSx\")",
      "Bash(__NEW_LINE__ echo \"=== 测试集表格最新字段 ===\")",
      "Bash(__NEW_LINE__ echo \"=== 获取所有表格列表 ===\")",
      "Bash(TOKEN=\"t-g10415dK2Q4LIZJQQOZ64V66G7OG5GD2FDYOH3BB\" echo \"=== BadCase 表格字段 ===\" /usr/bin/curl -s \"https://open.feishu.cn/open-apis/bitable/v1/apps/WXQgb98iPauYsHsSYzMckqHcnbb/tables/tbllFuw1BVwpvyrI/fields\" -H \"Authorization: Bearer $TOKEN\" cat /tmp/badcase_fields.json)",
      "Bash(__NEW_LINE__ jq '.data.items[] | {field_name: .field_name, type: .type}' /tmp/badcase_fields.json)",
      "Bash(__NEW_LINE__ jq '.data.items[] | {field_name: .field_name, type: .type}' /tmp/goodcase_fields.json)",
      "Bash(TOKEN=\"t-g10416aIFI3ZY6BRUJBDI2GYMFJH75K7R6DTSDMD\")",
      "Bash(__NEW_LINE__ echo \"=== BadCase 表格字段 ===\")",
      "Bash(ENABLE_BULL_QUEUE=true timeout 20 pnpm run start:dev:*)",
      "Bash(API_KEY=\"$SUPABASE_SERVICE_ROLE_KEY\" curl -s \"https://uvmbxcilpteaiizplcyp.supabase.co/rest/v1/test_executions?select=id,case_name,agent_response,tool_calls&execution_status=eq.success&limit=3\" -H \"apikey: $API_KEY\" -H \"Authorization: Bearer $API_KEY\")",
      "Bash(API_KEY=\"$SUPABASE_SERVICE_ROLE_KEY\" curl -s \"https://uvmbxcilpteaiizplcyp.supabase.co/rest/v1/rpc/get_chat_session_list\" -X POST -H \"apikey: $API_KEY\" -H \"Authorization: Bearer $API_KEY\" -H \"Content-Type: application/json\" -d '{\"\"p_start_date\"\": \"\"2025-01-01T00:00:00Z\"\", \"\"p_end_date\"\": \"\"2025-01-07T23:59:59Z\"\"}')",
      "Bash(API_KEY=\"$SUPABASE_SERVICE_ROLE_KEY\" curl -s \"https://uvmbxcilpteaiizplcyp.supabase.co/rest/v1/chat_messages?select=chat_id,timestamp,candidate_name&timestamp=gte.2025-01-01T00:00:00Z&timestamp=lte.2025-01-07T23:59:59Z&order=timestamp.desc&limit=20\" -H \"apikey: $API_KEY\" -H \"Authorization: Bearer $API_KEY\")",
      "Bash(KEY=\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InV2bWJ4Y2lscHRlYWlpenBsY3lwIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2MjkwODI2MiwiZXhwIjoyMDc4NDg0MjYyfQ.IU2po4_YttuvOyHwJSR8yU9739tjV5T6zmMyjPcGaTc\")",
      "Bash(npx ts-node:*)",
      "Bash(__NEW_LINE__ echo -e \"\\\\n=== 测试 getBatchExecutions ===\")",
      "Bash(# 检查前端是否运行在正确端口 lsof -i :5175)",
      "Bash(pnpm run type-check:*)"
    ],
    "deny": [
      "Bash(git restore:*)",
      "Bash(git reset --hard:*)",
      "Bash(git clean:*)",
      "Bash(git checkout -- .:*)",
      "Bash(git checkout HEAD:*)",
      "Bash(git stash drop:*)",
      "Bash(git reflog delete:*)",
      "Bash(rm -rf:*)"
    ],
    "ask": [
      "Bash(git commit:*)",
      "Bash(git push:*)",
      "Bash(git reset:*)",
      "Bash(git rebase:*)",
      "Bash(git push --force:*)",
      "Bash(git push -f:*)",
      "Bash(git stash:*)"
    ]
  },
  "enableAllProjectMcpServers": true,
  "enabledMcpjsonServers": [
    "feishu-mcp"
  ],
  "hooks": {
    "SessionStart": [
      {
        "hooks": [
          {
            "type": "command",
            "command": ".claude/hooks/session-start.sh",
            "timeout": 5
          }
        ]
      }
    ],
    "PostToolUse": [
      {
        "matcher": "Write",
        "hooks": [
          {
            "type": "command",
            "command": "npm run format",
            "timeout": 30
          },
          {
            "type": "command",
            "command": ".claude/hooks/auto-stage-files.sh",
            "timeout": 10
          }
        ]
      },
      {
        "matcher": "Edit",
        "hooks": [
          {
            "type": "command",
            "command": "npm run format",
            "timeout": 30
          },
          {
            "type": "command",
            "command": ".claude/hooks/auto-stage-files.sh",
            "timeout": 10
          }
        ]
      }
    ],
    "UserPromptSubmit": [
      {
        "hooks": [
          {
            "type": "command",
            "command": ".claude/hooks/check-modified-files.sh",
            "timeout": 10
          }
        ]
      }
    ]
  }
}
