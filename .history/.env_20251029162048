# ================================
# 应用配置
# ================================
# 服务运行端口
PORT=8080

# 运行环境：development | production | test
NODE_ENV=development

# ================================
# Agent API 配置（AI 智能回复服务）
# ================================
# 💡 快速切换环境：注释/取消注释对应的配置即可

# ========== 本地开发环境（当前激活）==========
# 使用本地 agent 服务，可查看详细日志
# 启动方式：在项目根目录运行 ./start-local-debug.sh
AGENT_API_KEY=test-token
AGENT_API_BASE_URL=http://localhost:3000/api/v1

# ========== 生产环境（已注释）==========
# 使用远程 agent 服务
# AGENT_API_KEY=fabbb5.qX6tsHwJU17JlxQC-yshVA.Du963ozz9cA2L3LZ
# AGENT_API_BASE_URL=https://huajune.duliday.com/api/v1

# 默认使用的 AI 模型
AGENT_DEFAULT_MODEL=anthropic/claude-sonnet-4-5-20250929

# 候选人咨询场景的模型配置
# 聊天模型 - 用于与候选人对话
AGENT_CHAT_MODEL=anthropic/claude-sonnet-4-5-20250929
# 分类模型 - 用于意图识别和消息分类
AGENT_CLASSIFY_MODEL=openai/gpt-4o
# 回复模型 - 用于生成最终回复
AGENT_REPLY_MODEL=openai/gpt-5-chat-latest

# 允许使用的工具列表（逗号分隔）
AGENT_ALLOWED_TOOLS=duliday_interview_booking,duliday_job_details,duliday_job_list,zhipin_reply_generator

# Agent API 请求超时时间（毫秒）
AGENT_API_TIMEOUT=600000

# Agent API 健康检查间隔（毫秒，默认 1 小时）
AGENT_HEALTH_CHECK_INTERVAL_MS=3600000

# ================================
# Redis 缓存配置（Upstash）
# ================================
# Upstash Redis REST API URL（必填）
UPSTASH_REDIS_REST_URL=https://enjoyed-cattle-63738.upstash.io

# Upstash Redis REST API Token（必填）
UPSTASH_REDIS_REST_TOKEN=Afj6AAIncDFlMmE5YzU0OTg2MjI0NjE4ODBjOGFjMGQ1MWRiMzIxNnAxNjM3Mzg

# 响应缓存 TTL（秒，默认 1 小时）
AGENT_RESPONSE_CACHE_TTL_SECONDS=3600

# 单条缓存最大大小（KB，默认 100KB）
AGENT_RESPONSE_CACHE_MAX_ITEM_SIZE_KB=100

# ================================
# DuLiDay API 配置
# ================================
# DuLiDay API Token（必填）
# 用于调用杜力岱招聘工具 API
DULIDAY_API_TOKEN=7889517C79B0563E0656DAA397344BB6ECB24820F8BAB36636B68CC87F5F0D5690B6EDE122AAD32C89B04746D649DD16B4A25CB55416FE385FA81B4B90D9F862FCA2D1CD71F936F4224698AFD1CB8ED52D6FD71F41FDBBEC

# 是否启用 AI 自动回复
ENABLE_AI_REPLY=true

# ================================
# 托管平台 API 配置
# ================================
# Stride API 基地址 - 小组级接口（必填）
STRIDE_API_BASE_URL=https://stride-bg.dpclouds.com

# Stride API 基地址 - 企业级接口（必填）
STRIDE_ENTERPRISE_API_BASE_URL=https://stride-bg.dpclouds.com/hub-api

# ================================
# 消息历史管理配置
# ================================
# 每个会话保留的最大消息数
MAX_HISTORY_PER_CHAT=30

# 历史消息过期时间（毫秒，默认 2 小时）
HISTORY_TTL_MS=7200000

# ================================
# 消息聚合配置
# ================================
# 是否启用消息聚合功能（默认 true）
ENABLE_MESSAGE_MERGE=true

# 消息聚合时间窗口（毫秒，默认 3 秒）
MESSAGE_MERGE_WINDOW_MS=1000

# 单次最多聚合消息数（默认 5 条）
MAX_MERGED_MESSAGES=5

# ================================
# Bull 队列配置（生产环境）
# ================================
# 是否启用 Bull 队列（默认 false）
# 建议生产环境启用，支持多实例部署和任务重试
ENABLE_BULL_QUEUE=false

# Upstash Redis TCP 连接（用于 Bull 队列）
UPSTASH_REDIS_TCP_URL=rediss://default:Afj6AAIncDFlMmE5YzU0OTg2MjI0NjE4ODBjOGFjMGQ1MWRiMzIxNnAxNjM3Mzg@enjoyed-cattle-63738.upstash.io:6379

# ================================
# HTTP 客户端配置
# ================================
HTTP_CLIENT_TIMEOUT=10000
