# 产品定义文档

> **项目名称**: DuLiDay WeCom Service - 智能招聘助手
> **版本**: v1.0
> **最后更新**: 2025-10-17

---

## 一、产品概述

### 1.1 产品定位

DuLiDay WeCom Service 是一个基于企业微信的**智能招聘自动化系统**，通过 AI 对话能力，实现餐饮连锁企业的招聘流程自动化，提升招募经理的工作效率，改善候选人体验。

### 1.2 核心价值

| 角色 | 痛点 | 解决方案 | 价值 |
|------|------|---------|------|
| **招募经理** | 每天处理大量重复咨询<br>手动安排面试<br>人工跟进候选人 | AI 自动回答常见问题<br>智能多轮对话收集信息<br>自动化提醒和跟进 | 节省 60-80% 重复劳动<br>提升响应速度<br>降低遗漏率 |
| **候选人** | 咨询响应慢<br>信息不透明<br>面试流程不清晰 | 7x24 小时即时响应<br>主动提供完整信息<br>清晰的流程引导 | 提升体验<br>提高到面率<br>增强信任感 |
| **店长** | 手动报缺流程繁琐<br>面试信息不及时<br>数据统计困难 | 自动识别报缺信息<br>自动同步到系统<br>每日面试名单推送 | 简化流程<br>提高效率<br>数据透明 |
| **HR/管理层** | 招聘数据不透明<br>人工统计耗时<br>决策缺乏依据 | 每日自动数据报告<br>全流程数据追踪<br>可视化看板 | 数据驱动决策<br>优化招聘策略<br>提升 ROI |

### 1.3 应用场景

**行业**: 餐饮连锁企业（蜀地源冒菜、成都你六姐等品牌）
**岗位类型**: 服务员、洗碗工、传菜员、收银员等基层岗位
**招聘渠道**: Boss 直聘、鱼泡网等平台
**沟通工具**: 企业微信

---

## 二、用户角色

### 2.1 核心角色

```
┌────────────────────────────────────────────────────────────────┐
│                          角色关系图                             │
├────────────────────────────────────────────────────────────────┤
│                                                                 │
│   招聘平台                    企业微信生态                      │
│  (Boss/鱼泡)                                                    │
│      │                                                          │
│      ↓                                                          │
│  ┌─────────┐                                                   │
│  │ 候选人  │ ─────添加好友────→ ┌────────────────┐             │
│  └─────────┘                    │   工作号       │             │
│      │                          │ (招募经理)     │             │
│      │                          └────────┬───────┘             │
│      │                                   │                     │
│      ├──────加入群聊──────┐              │                     │
│      │                    ↓              ↓                     │
│      │            ┌─────────────┐  ┌──────────┐               │
│      │            │  兼职群      │  │ 店长群   │               │
│      │            │  抢单群      │  └──────────┘               │
│      │            └─────────────┘       │                     │
│      │                    │              │                     │
│      └───私聊咨询─────────┼──────────────┘                     │
│                           ↓                                    │
│                   ┌──────────────┐                             │
│                   │  AI 智能助手  │                             │
│                   │  (本系统)     │                             │
│                   └──────────────┘                             │
│                                                                 │
└────────────────────────────────────────────────────────────────┘
```

### 2.2 角色详情

#### 角色 1: 候选人（应聘者）

**特征**:
- 年龄：18-55 岁
- 学历：初中及以上
- 求职意向：服务员、洗碗工等基层岗位
- 技术水平：会使用微信，可能不熟悉复杂应用

**需求**:
- 快速了解岗位信息（地点、薪资、班次）
- 简单便捷的面试预约
- 及时的面试提醒
- 清晰的流程指引

**行为特征**:
- 带着强意图咨询（"我在群里看到XX岗位"）
- 关注薪资和工作时间
- 可能同时咨询多个岗位/品牌
- 需要多次确认信息

---

#### 角色 2: 招募经理（工作号）

**职责**:
- 在招聘平台筛选候选人
- 添加候选人微信并拉群
- 回答岗位咨询
- 安排面试
- 跟进面试结果
- 安排试工和签约
- 向店长推送面试名单
- 收集店长报缺信息

**工作痛点**:
- 每天处理 50-100 条重复咨询
- 手动记录候选人信息
- 容易遗漏面试提醒
- 跟进不及时导致候选人流失
- 店长报缺信息需要手动录入系统

**期望**:
- AI 自动回答 80% 的常见问题
- 自动收集候选人信息
- 自动化提醒和跟进
- 一键发送面试名单
- 自动识别报缺信息

---

#### 角色 3: 店长

**职责**:
- 管理门店日常运营
- 上报用人需求（报缺）
- 接收面试候选人
- 决定候选人是否通过

**工作痛点**:
- 在群里手动填写报缺 Excel
- 面试信息不及时
- 候选人信息不完整

**期望**:
- 简化报缺流程（发消息即可）
- 每天自动收到面试名单
- 候选人信息完整准确

---

#### 角色 4: HR/管理层

**职责**:
- 制定招聘策略
- 监控招聘数据
- 优化招聘流程

**需求**:
- 每日招聘数据（约面、到面、入职）
- 转化率分析
- 成本核算

---

## 三、核心功能

### 3.1 功能架构图

```
┌─────────────────────────────────────────────────────────────────┐
│                      DuLiDay WeCom Service                       │
│                     智能招聘助手功能架构                          │
└─────────────────────────────────────────────────────────────────┘

┌──────────────── 场景 A: 私聊对话（核心）────────────────────────┐
│                                                                   │
│  功能 1: 智能多轮对话                                             │
│  ├─ 1.1 主动欢迎语                                               │
│  ├─ 1.2 岗位咨询（地区/品牌/门店/班次/薪资/要求）                │
│  ├─ 1.3 面试安排（收集信息/选择时间/确认预约）                   │
│  ├─ 1.4 面试提醒（提前1天/当天提醒）                             │
│  ├─ 1.5 面试后跟进（询问感受/安排试工）                          │
│  └─ 1.6 签约跟进（发送二维码/确认入职）                          │
│                                                                   │
│  功能 2: 会话管理                                                 │
│  ├─ 2.1 多轮对话上下文保持                                       │
│  ├─ 2.2 候选人信息自动收集                                       │
│  ├─ 2.3 状态流转追踪                                             │
│  └─ 2.4 历史消息剪裁优化                                         │
│                                                                   │
└───────────────────────────────────────────────────────────────────┘

┌──────────────── 场景 B: 群聊管理 ─────────────────────────────┐
│                                                                   │
│  B1. 兼职群                                                       │
│  ├─ 定时发布岗位通知                                             │
│  └─ 自动引导私聊                                                 │
│                                                                   │
│  B2. 抢单群                                                       │
│  ├─ 定时发布抢单通知                                             │
│  └─ 自动引导私聊                                                 │
│                                                                   │
│  B3. 店长群                                                       │
│  ├─ 自动发送每日面试名单                                         │
│  ├─ 识别店长报缺信息                                             │
│  ├─ 提取结构化数据                                               │
│  └─ 同步到海绵系统                                               │
│                                                                   │
└───────────────────────────────────────────────────────────────────┘

┌──────────────── 场景 C: 数据与报告 ───────────────────────────┐
│                                                                   │
│  功能 1: 招聘数据统计                                             │
│  ├─ 约面数、到面数、面过数、入职数                               │
│  └─ 每日自动发送给 HR                                            │
│                                                                   │
│  功能 2: 候选人全流程追踪                                         │
│  ├─ 状态变更记录                                                 │
│  └─ 流失节点分析                                                 │
│                                                                   │
└───────────────────────────────────────────────────────────────────┘
```

---

### 3.2 核心功能详述

#### 功能 1: 私聊智能多轮对话（⭐ 最高优先级）

**1.1 主动欢迎语**

```
触发条件: 候选人添加工作号为好友
自动响应: "你好！我是招募经理小智，有什么可以帮你的吗？"
目的: 建立第一印象，引导开始对话
```

**1.2 岗位咨询阶段**

候选人通常带着强意图咨询，系统需要：

| 咨询主题 | 示例问题 | 系统回复 | 收集信息 |
|---------|---------|---------|---------|
| 地区岗位 | "浦东有没有服务员岗位？" | "浦东有蜀地源冒菜、XX品牌，您对哪个感兴趣？" | 地区偏好 |
| 品牌门店 | "蜀地源哪个店在招人？" | "蜀地源浦东有3家店：XX路店、XX路店..." | 品牌偏好 |
| 班次信息 | "有没有兼职？" | "有的！支持全职和兼职，您方便什么时间？" | 班次偏好 |
| 薪资待遇 | "工资多少？" | "基本工资 4-6k，另有全勤奖 300 元..." | 薪资预期 |
| 岗位要求 | "有年龄要求吗？" | "18-45 岁，不需要经验，有健康证优先" | - |

**特点**:
- ✅ 支持任意顺序咨询
- ✅ 自动记录候选人偏好
- ✅ 避免重复回答已问问题
- ✅ 根据候选人信息动态推荐

**1.3 面试安排阶段**

```
流程：
候选人表达意向
  → 收集候选人信息（姓名/电话/年龄/经验）
  → 询问面试方式（线上/线下）
  → 选择面试时间
  → 确认预约
  → 发送确认消息
```

**渐进式信息收集**（避免一次性问太多）:

```
机器人："听起来你对这个岗位很感兴趣，方便告诉我你的名字吗？"
候选人："张三"

机器人："张三你好！方便留个电话吗？后续安排面试会联系你~"
候选人："13812345678"

机器人："好的！方便透露一下年龄吗？"
候选人："28"

机器人："完美！你方便线上视频面试还是到店面试？"
候选人："到店面试"

机器人："好的！明天下午或后天上午方便吗？"
候选人："明天下午"

机器人："确认信息：
  姓名：张三
  电话：138****5678
  年龄：28 岁
  面试时间：明天（10月18日）下午2点
  面试地点：浦东XX路蜀地源冒菜

  确认预约吗？"
候选人："确认"

机器人："✅ 预约成功！面试前会提醒你，有问题随时联系我~"
```

**1.4 面试提醒**

| 时机 | 内容 | 目的 |
|------|------|------|
| 提前1天 | "明天下午2点面试，记得准时哦~<br>地址：XX路XX号<br>联系人：XX店长" | 提醒候选人，降低爽约率 |
| 当天上午 | "今天下午2点面试，地址：XX<br>需要带：身份证、健康证（如有）" | 二次提醒，说明注意事项 |

**1.5 面试后跟进**

```
时机: 面试后第二天上午

机器人（主动）："你好！昨天的面试感觉如何？"
候选人："还不错"

机器人："太好了！我们这边也觉得你很合适。什么时候可以来试工呢？"
候选人："明天可以"

机器人："好的！明天上午10点到店，试工1天。
地址：XX路XX号
联系店长：XX（电话：XXX）"
```

**1.6 签约跟进**

```
试工通过后：

机器人："恭喜试工通过！🎉
请扫描下方二维码完成签约：
[二维码图片]

签约后就可以正式上班啦！"

（3小时后跟进）
机器人："签约完成了吗？有什么问题可以随时问我~"

（候选人签约后）
机器人："✅ 签约成功！明天可以正式上班啦！
上班时间：XX
地点：XX
报到流程：XX"
```

---

#### 功能 2: 群聊管理

**2.1 兼职群 & 抢单群**

```
定时任务（岗位通知）:
  时间: 每天早上9点
  内容:
    "【今日岗位】

    🍜 蜀地源冒菜-浦东店
    岗位：服务员 2名
    薪资：4-6k + 全勤奖
    班次：11:00-15:00

    🍜 成都你六姐-徐汇店
    岗位：洗碗工 1名
    薪资：5-6k
    班次：17:00-22:00

    感兴趣请添加我私聊详谈~"

自动回复（引导私聊）:
  触发: 检测到问题（包含"？"、"吗"、"有没有"等）
  回复: "您好！为了更好地为您服务，请添加我的微信详细咨询哦~"
```

**2.2 店长群**

```
功能 A: 每日面试名单推送
  时间: 每天早上9点
  数据来���: 昨天私聊预约的面试记录

  格式:
    "殷若冰
    13122996530
    女
    45岁
    成都你六姐-上海吴泾满天星店-早班开档-小时工
    2025-10-17 15:30

    张娅
    18888333867
    女
    35岁
    成都你六姐-上海云廊龙湖天街店-前厅服务员-小时工
    2025-10-17 16:00

    @云廊龙湖 @满天星～店长～陈辉 @宝山万达-店长-王永康
    店长上午好！今天的面试名单请查收~
    【第三方推荐的只用聊工作标准、内容、时间，不用谈薪资】"

功能 B: 店长报缺信息收集
  触发: 监听群消息，识别报缺关键词

  店长发送:
    "@高雅琪 月底近铁需要3位伙伴
    职位：洗碗工1名
    工作时间：11:30-15:30
    职位：服务员2名
    工作时间：11:00-15:00 / 11:30-14:30
    要求：年龄55周岁以下，每天都上班
    有上海健康证，服从安排，手脚麻利"

  系统处理:
    1. 使用 AI 提取结构化信息
    2. 同步到海绵系统
    3. 回复确认:
       "✅ 已收到报缺信息：
       门店：月底近铁
       职位：洗碗工 1名、服务员 2名

       已更新到海绵系统，马上安排招募~"
```

---

#### 功能 3: 数据报告

```
每日招聘数据报告:
  接收人: HR（固定微信号）
  时间: 每天下午6点

  格式:
    "10.17数据
    约面数: 5
    到面数: 3
    面过数: 1
    入职数: 1
    待入职: 22"
```

---

## 四、技术架构

### 4.1 系统架构图

```
┌─────────────────────────────────────────────────────────────────┐
│                        External Systems                          │
│  ┌──────────────┐  ┌──────────────┐  ┌────────────────────┐   │
│  │ 企业微信API   │  │ 托管平台API   │  │ 花卷Agent API      │   │
│  └──────────────┘  └──────────────┘  └────────────────────┘   │
│  ┌──────────────┐                                              │
│  │ 海绵系统API   │                                              │
│  └──────────────┘                                              │
└─────────────────────────────────────────────────────────────────┘
                              ↕
┌─────────────────────────────────────────────────────────────────┐
│              Bot Service (NestJS Application)                    │
│                                                                   │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │                   API Layer                              │   │
│  │  /bot  /chat  /message  /room  /contact                 │   │
│  └─────────────────────────────────────────────────────────┘   │
│                              ↕                                   │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │                Business Logic Layer                      │   │
│  │                                                           │   │
│  │  私聊场景:                                                │   │
│  │  ├─ ConversationService (会话管理)                       │   │
│  │  ├─ ConversationOrchestrator (对话编排)                  │   │
│  │  └─ PrivateChatHandler (私聊处理)                        │   │
│  │                                                           │   │
│  │  群聊场景:                                                │   │
│  │  ├─ GroupChatHandler (群消息处理)                        │   │
│  │  ├─ StoreManagerGroupHandler (店长群处理)                │   │
│  │  └─ InterviewScheduleGenerator (面试名单生成)            │   │
│  │                                                           │   │
│  │  定时任务:                                                │   │
│  │  ├─ InterviewReminderService (面试提醒)                  │   │
│  │  ├─ FollowUpService (自动跟进)                           │   │
│  │  └─ ReportService (数据报告)                             │   │
│  │                                                           │   │
│  └─────────────────────────────────────────────────────────┘   │
│                              ↕                                   │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │              Integration Layer                           │   │
│  │  ├─ AgentService (Agent API 调用)                        │   │
│  │  ├─ AgentConfigService (配置管理)                        │   │
│  │  └─ SpongeApiService (海绵系统集成)                      │   │
│  └─────────────────────────────────────────────────────────┘   │
│                              ↕                                   │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │              Infrastructure Layer                        │   │
│  │  ├─ HttpService (HTTP 客户端)                            │   │
│  │  ├─ ConfigService (配置管理)                             │   │
│  │  └─ LoggerService (日志)                                 │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                   │
└─────────────────────────────────────────────────────────────────┘
```

### 4.2 核心技术栈

- **后端框架**: NestJS (TypeScript)
- **AI 能力**: 花卷智能体 API
  - Claude 3.7 Sonnet（复杂对话）
  - Qwen Plus（简单提取）
- **即时通讯**: 企业微信 API + 托管平台 API
- **定时任务**: @nestjs/schedule
- **数据存储**: 内存（可扩展到 Redis/数据库）
- **日志**: Winston

### 4.3 AI 能力应用

| 场景 | 模型选择 | 用途 |
|------|---------|------|
| 私聊岗位咨询 | Claude 3.7 Sonnet | 多轮对话、意图识别、信息收集 |
| 店长报缺提取 | Qwen Plus | 结构化信息提取 |
| 意图分类 | Qwen Plus | 快速分类问题类型 |

---

## 五、业务流程

### 5.1 候选人招聘全流程

```
┌���────────────────────────────────────────────────────────────────┐
│                  候选人招聘全生命周期                            │
└─────────────────────────────────────────────────────────────────┘

阶段 0: 平台初筛（Boss/鱼泡）
  └─ 同事号添加候选人微信 → 拉进兼职群/抢单群

阶段 1: 群内岗位推送
  ├─ 每日发布岗位通知
  └─ 候选人看到感兴趣岗位 → 添加招募经理微信

阶段 2: 私聊岗位咨询（⭐ AI 自动化）
  ├─ 主动欢迎语
  ├─ 多轮咨询（地区/品牌/薪资/班次/要求）
  ├─ 自动收集候选人偏好
  └─ 候选人表达面试意向 → 进入阶段 3

阶段 3: 面试安排（⭐ AI 自动化）
  ├─ 收集候选人信息（姓名/电话/年龄）
  ├─ 选择面试方式（线上/线下）
  ├─ 选择面试时间
  ├─ 确认预约
  └─ 发送确认消息

阶段 4: 面试提醒（⭐ 自动化）
  ├─ 提前 1 天提醒
  └─ 当天提醒

阶段 5: 店长接收面试名单（⭐ 自动化）
  └─ 每天早上 9 点推送到店长群

阶段 6: 面试后跟进（⭐ AI 主动跟进）
  ├─ 面试后第二天询问感受
  ├─ 安排试工
  └─ 试工后跟进

阶段 7: 签约入职（⭐ 自动化）
  ├─ 发送签约二维码
  ├─ 跟进签约进度
  └─ 确认入职

阶段 8: 数据统计（⭐ 自动化）
  └─ 每日汇总数据发送给 HR
```

### 5.2 店长报缺流程

```
传统流程:
  店长在群里填写 Excel → 招募经理手动复制 → 登录海绵系统 → 手动录入
  ❌ 耗时、易错、体验差

AI 自动化流程:
  店长在群里发消息 → AI 自动识别 → 提取结构化数据 → 自动同步海绵系统 → 回复确认
  ✅ 1 分钟完成，准确率 95%+
```

---

## 六、核心指标

### 6.1 效率指标

| 指标 | 传统方式 | AI 自动化 | 提升 |
|------|---------|----------|------|
| 平均响应时间 | 30-60 分钟 | < 3 秒 | **99% ↑** |
| 单个候选人处理时间 | 20-30 分钟 | 5-10 分钟 | **60% ↓** |
| 招募经理日均处理量 | 20-30 人 | 50-100 人 | **150% ↑** |
| 面试爽约率 | 30-40% | 15-20% | **50% ↓** |
| 信息录入错误率 | 5-10% | < 1% | **90% ↓** |

### 6.2 业务指标

| 指标 | 定义 | 目标值 |
|------|------|--------|
| 到面率 | 到面数 / 约面数 | > 60% |
| 面试通过率 | 面过数 / 到面数 | > 50% |
| 入职转化率 | 入职数 / 面过数 | > 80% |
| 候选人满意度 | 体验评分 | > 4.5/5.0 |
| AI 回答准确率 | 正确回答 / 总问题 | > 90% |

---

## 七、实施计划

### 7.1 MVP 范围（第一版）

✅ **必须有**:
1. 私聊岗位咨询（完整多轮对话）
2. 面试安排流程
3. 会话上下文管理
4. Agent API 集成

⏳ **第二版**:
1. 面试提醒（定时任务）
2. 面试后主动跟进
3. 店长群面试名单推送

🔮 **第三版**:
1. 店长报缺识别与同步
2. 兼职群/抢单群管理
3. 数据报告

### 7.2 技术风险

| 风险 | 影响 | 缓解措施 |
|------|------|---------|
| Agent API 不稳定 | 回复失败 | 实施重试机制 + 降级方案 |
| 消息剪裁导致上下文丢失 | 对话不连贯 | 合理配置保留消息数 |
| 多轮对话状态管理复杂 | 状态错乱 | 严格的状态机设计 + 充分测试 |
| 海绵系统 API 缺失 | 无法自动同步 | 先用数据库存储，后续对接 |

---

## 八、成功案例（预期）

### 案例 1: 招募经理小王

**Before**:
- 每天手动回复 50+ 条重复问题
- 经常忘记面试提醒，候选人爽约率高
- 晚上 10 点还在回消息

**After**:
- AI 自动回答 80% 的咨询
- 系统自动提醒，爽约率降低 50%
- 下班后无需处理消息
- **每天节省 4-5 小时**

### 案例 2: 候选人张三

**Before**:
- 发消息后等了 2 小时才收到回复
- 面试前一天没收到提醒，差点忘记
- 不清楚薪资和班次，最后放弃

**After**:
- 秒级响应，所有问题立即得到回答
- 提前 1 天 + 当天两次提醒
- 信息透明，体验良好，顺利入职

### 案例 3: 店长李经理

**Before**:
- 在群里填 Excel 报缺，容易出错
- 面试信息不及时，候选人到店了才知道

**After**:
- 直接在群里发消息，1 分钟完成报缺
- 每天早上自动收到完整的面试名单
- **节省 30 分钟/天**

---

## 九、附录

### 9.1 关键术语

| 术语 | 定义 |
|------|------|
| 工作号 | 招募经理使用的企业微信号，同时负责群运营 |
| 同事号 | 在招聘平台工作的微信号（与工作号是同一个） |
| 报缺 | 店长上报用人需求 |
| 约面数 | 预约面试的候选人数量 |
| 到面数 | 实际到店面试的候选人数量 |
| 面过数 | 面试通过的候选人数量 |
| 待入职 | 已面试通过但尚未入职的候选人数量 |
| 海绵系统 | 企业内部的招聘管理系统 |
| 抢单 | 临时紧急用工需求，候选人快速响应 |

### 9.2 相关文档

- [Chat Agent API 最佳实践](./CHAT_AGENT_BEST_PRACTICES.md)
- [技术架构设计](./ARCHITECTURE.md) *(待创建)*
- [多轮对话状态机设计](./CONVERSATION_STATE_MACHINE.md) *(待创建)*
- [API 接口文档](./API_DOCUMENTATION.md) *(待创建)*

---

**文档状态**: ✅ 完成
**审核人**: 待定
**下一步**: 开始编写技术设计文档和代码实现
